
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Markov Madness, Part 1 - Maia McCormick</title>
  <meta name="author" content="Maia Remez McCormick">

  
  <meta name="description" content="Man, I&rsquo;ve hardly written code in three whole weeks! Such a strange feelings, after 3 solid months of coding. Anyway, back at Hacker School for &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://maiamcc.github.io/blog/2014/10/23/markov-madness">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Maia McCormick" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Overlock+SC|Overlock:400,700|Merriweather:400,400italic,700,700italic' rel='stylesheet' type='text/css'>

<!-- Add fancyBox -->
<link rel="stylesheet" href="/fancybox/source/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

<script type="text/javascript">
    $(document).ready(function() {
        $(".fancybox").fancybox();
        $(".fancybox").fancybox({
    width  : 600,
    height : 300,
    type   :'iframe'
    });

});
</script>
  

</head>

<body   >
  <header role="banner"><div class="header-left">
  <hgroup>
  <h1><a href="/">Maia McCormick</a></h1>
  
  <div class="subtitle">
    <h2>Programmer, writer, nerd</h2>
  </div>
  
  </hgroup>
  
</div>

<div class="header-right">
  <ul class="main-navigation">
 <div class="selected"> 
  <li><a href="/">blog</a></li></div>
  <div class="spacer"></div>

 <div> 
  <li><a href="/projects">projects</a></li></div>
  <div class="spacer"></div>

 <div> 
  <li><a href="/about">about</a></li></div>
</ul>

</div>
</header>
  <div id="main">
    <div id="content">
      <div id="thepost">
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Markov Madness, Part 1</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-10-23T15:52:47-04:00" pubdate data-updated="true">23 Oct 2014</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Man, I&rsquo;ve hardly written code in <em>three whole weeks!</em> Such a strange feelings, after 3 solid months of coding. Anyway, back at Hacker School for the day, and with my OPW application in, I&rsquo;ve been itching to actually <em>write some code</em>, so I revisited my old <a href="https://github.com/maiamcc/markovgen">Markov generator</a> project, which takes a training corpus and generates psuedo-random texts in the style of that corpus.<!--more--></p>

<p>I&rsquo;ve tried a few different tacks today for getting texts that actually resembled English and not just word-soup. The first was using n-grams of varying n&rsquo;s when generating my texts[^1]. n = 1 is just random words and not worth testing. n = 2 is very nearly gibberish. n = 3 and n = 4 are the sweet spot of sensical-yet-random text; when we get to n = 5, it tends to be several verbatim sentences from the corpus patched together in odd ways, and at n = 6, it is almost consistently exact quotes from the text. At a guess, in more quote-unquote complex texts (i.e., those with more unique words) n = 5 will be closer to verbatim, and in texts with more common words, there will be more room for deviation from any pattern that the generator falls into, and thus n = 5 will be distinct from the original text. Here are generated texts using n-grams of increasing n, from <em>Pride and Prejudice</em>.</p>

<p>n = 2:</p>

<blockquote><p>&lsquo;to-morrow; and as she could not do. He looked towards clearing him, Charlotte Lucas, when you an admiration will afford, and the establishment were said Miss Darcy was at no reason away, where Mr. Bingley was meant by me. I am sure,&ldquo; she had scarcely ever mentioned to her, &#8220;these offenses might have the temptation, added, &#8220;that my manner in the walk to Mr. Darcy liked him.&rdquo; &ldquo;But it was diffuse in money which had ended only could listen, therefore, pardon for having very day confirms my dear,&rdquo; said by their present party; but their separation. To these three or&rsquo;</p></blockquote>

<p>n = 3:</p>

<blockquote><p>&lsquo;been used to want to speak with composure when she ceased speaking, &ldquo;I have just received from Mr. Collins.&rdquo; &ldquo;From Mr. Collins! and what can he mean by apologising for being simply dressed. She likes to have on the instrument, Eliza, and you ought to have on the length of his description of Jane. She felt it incumbent on her side. But I am in such awe of her wishes. Their sister&rsquo;s wedding day arrived; and Jane seem so wholly unconnected with any other man it would go. But he found, in reply to his ideas of happiness! But it&rsquo;</p></blockquote>

<p>n = 4:</p>

<blockquote><p>&lsquo;was his conviction of its being heard. Elizabeth soon saw that she was not very differently engaged. &ldquo;There is also one other person in the room. Colonel Fitzwilliam seemed really glad to see them; he had felt the smallest interest, and from none received either attention or pleasure. Miss Bennet he acknowledged to be pretty, but she smiled too much. Mrs. Hurst and Miss Bingley was uncivil to her, and she felt how little would be gained by her attempting to pursue them. Calling back the servant, therefore, she commissioned him, though in so breathless an accent as made her&rsquo;</p></blockquote>

<p>n = 5</p>

<blockquote><p>&lsquo;some manner connected with the letter he held. It suddenly struck her that it might be from Lady Catherine; and she anticipated with dismay all the consequent explanations. She followed her father to the fire place, and they both sat down. He then said, &ldquo;I have received a letter this morning that has astonished me exceedingly. As it principally concerns yourself, you ought to know its contents. I did not know what to think.&rdquo; &ldquo;She is a very good kind of woman, not too clever to be a valuable neighbour to Mrs. Bennet. They had several children. The eldest of&rsquo;</p></blockquote>

<p>Compare that to n-grams of increasing n from <em>Harry Potter and the Chamber of Secrets</em>. There&rsquo;s the same pattern of higher n&rsquo;s both making more sense and being closer to the original text, but we don&rsquo;t start getting verbatim text excerpts until n = 6.</p>

<p>n = 2:</p>

<blockquote><p>&lsquo;knock people knew what Ginny out, reflecting the train harder than his hand- picked it into a nobody heard him - three of that your fault,&ldquo; retorted Draco. &#8220;The diary,&rdquo; said in the stairs. &ldquo;Remember, boy was always top Ron had in Transfiguration. &#8220;I don&rsquo;t care, he saw the clouds and George must&rsquo;ve opened the elf came back in the pitch - the wiser -&rdquo; &ldquo;But, Professor,&rdquo; said Harry had never touched Harry&rsquo;s own free rein from his feet climbing through the full of whom were trickling down to turn up off the ground with a beacon of excitement gripped&rsquo;</p></blockquote>

<p>n = 3</p>

<blockquote><p>&lsquo;Near sunset, Fred and George were now crammed into boxes on the side road where the photographer had stepped on what to do. &ldquo;Not lost are you, Myrtle?&rdquo; said Hermione as the Weasleys slouched outside with Harry behind them. &ldquo;No, he was doing something and I, um, I asked her not to smile. And Lockhart was looking furious, and as he tried to put himself under arrest. It drives Mum mad.&rdquo; &ldquo;That&rsquo;s the main road ahead, but their street was empty. &#8220;Okay,&rdquo; he said. &ldquo;Id better get going, Hagrid, it&rsquo;s Transfiguration next and I&rsquo;ve got -well, I think he did,&rdquo;&rsquo;</p></blockquote>

<p>n = 4</p>

<blockquote><p>&lsquo;say no to a large bottle of something labeled Skele-Gro. &ldquo;You&rsquo;re in for a rough night,&rdquo; she said, pouring out a steaming beakerful and handing it to them. &ldquo;I told your dad how to use a telephone last summer - he&rsquo;ll know. Call me at the orphanage she lived just long enough to copy down a name or date, then falling asleep again. He had made up his mind what he was going to tear it. While Ron kept watch he tugged and twisted, and at last, after several tense minutes, the paper came free. It was a nightmare -&rsquo;</p></blockquote>

<p>n = 5</p>

<blockquote><p>&lsquo;side of the field. &ldquo;They love it here &hellip;. Dad&rsquo;s too soft with them; he thinks they&rsquo;re funny &hellip; .&rdquo; He swept off his plumed hat and bowed them inside. It was an incredible sight. The dungeon was full of hundreds of pearly-white, translucent people, mostly drifting around a crowded dance floor, waltzing to the dreadful, quavering sound of thirty musical saws, played by an orchestra on a raised, black-draped platform. A chandelier overhead blazed midnight-blue with a thousand more black candles. Their breath rose in a mist before them; it was like stepping into a freezer. &ldquo;Shall&rsquo;</p></blockquote>

<p>n = 6</p>

<blockquote><p>&lsquo;into the station. Harry had caught the Hogwarts Express the previous year. The tricky part was getting onto platform nine and three-quarters, which wasn&rsquo;t visible to the Muggle eye. What you had to do was walk through the solid barrier dividing platforms nine and ten. It didn&rsquo;t hurt, but it had to be done carefully so that none of the Muggles noticed you vanishing. &ldquo;Percy first,&rdquo; said Mrs. Weasley, looking nervously at the clock overhead, which showed they had only five minutes to disappear casually through the barrier. Percy strode briskly forward and vanished. Mr. Weasley went next; Fred and&rsquo;</p></blockquote>

<p>Fun bonus: infinite loop!</p>

<blockquote><p>&ldquo;as much as possible prevented her husband from pressing her; but Mr. Collins could not conceal his apprehension of Lady Catherine&rsquo;s being rather displeased by her staying at home. When they were gone, Elizabeth, as if intending to exasperate herself as much as possible prevented her husband from pressing her; but Mr. Collins could not conceal his apprehension of Lady Catherine&rsquo;s being rather displeased by her staying at home. When they were gone, Elizabeth, as if intending to exasperate herself as much as possible prevented her husband from pressing her; but Mr. Collins could not conceal his apprehension of Lady&rdquo;</p></blockquote>

<p>[^1] an ngram is a group of n words considered at a time, where the first n-1 words key to the last word. So for instance, if I&rsquo;m working with tri-grams (n = 3) and the phrases &ldquo;it is a,&rdquo; &ldquo;it is silly&rdquo;, and &ldquo;it is Frank&rdquo; appear in my corpus, when my corpus gets loaded into a big dictionary, <code>[('it', 'is')]</code> will key to <code>['a', 'silly', 'Frank']</code>. Then, when I&rsquo;m generating random text and I already have &ldquo;it is&rdquo;, I can look in <code>mydict[('it', 'is')]</code> for words that might possibly follow that phrase. I then pick one at random, stick it onto the end of my text (say, &ldquo;it is Frank&rdquo;) and repeat (`mydict[(&lsquo;is&rsquo;, &lsquo;Frank&rsquo;)] &mdash;> [&lsquo;sick&rsquo;, &lsquo;angry&rsquo;,&lsquo;the&rsquo;]).</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Maia Remez McCormick</span></span>

      








  


<time datetime="2014-10-23T15:52:47-04:00" pubdate data-updated="true">23 Oct 2014</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/hacker-school/'>hacker school</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/10/22/reflections-on-my-first-open-source-contribution/" title="Previous Post: Reflections on my First Open-Source Contribution">&laquo; Reflections on my First Open-Source Contribution</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/10/23/markov-madness-2/" title="Next Post: Markov Madness, part 2">Markov Madness, part 2 &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  </section>
  <ul class="subscription" data-subscription="rss">
    <li><a href="/atom.xml" title="subscribe via RSS"><img src="/images/rss.png"></a></li>
  </ul>
    
  <form action="https://www.google.com/search" method="get">
    <fieldset role="search">
      <input type="hidden" name="q" value="site:maiamcc.github.io" />
      <input class="search" type="text" name="q" results="0" placeholder="Search"/>
    </fieldset>
  </form>
    
</section>
<img src = "/images/headshot.jpg">
<section>
  <a href="blog/archives/"><h1>Posts</h1></a>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2017/06/17/what-are-interfaces/">What Are Interfaces?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/04/29/dig-yourself-out-of-a-git-commit-amend-hole/">Dig Yourself Out of a &#8216;Git Commit Amend&#8217; Hole With Reflog</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/06/11/28-days-later/">28 Days Later: My First Four Weeks as a Junior Engineer at Spring</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/04/16/truthiness/">Truthiness</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/09/opw-retrospective/">OPW Retrospective</a>
      </li>
    
  </ul>
</section>


<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/maiamcc">@maiamcc</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'maiamcc',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - Maia Remez McCormick - maia [dot] mcc [at] gmail [dot] com
</p>

<p>
<span class="credit">Powered by <a href="http://octopress.org">Octopress</a> using the <a href="https://github.com/fapper/classic-martinb">classic-martinb</a> theme</span>
</p>
</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'maia-blog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://maiamcc.github.io/blog/2014/10/23/markov-madness/';
        var disqus_url = 'http://maiamcc.github.io/blog/2014/10/23/markov-madness/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
